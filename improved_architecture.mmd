graph TD
    %% Legend
    subgraph Legend
        direction LR
        L1[Component] --> L2[Interaction/Flow]
        style L1 fill:#f9f,stroke:#333,stroke-width:2px
        style L2 stroke:#333,stroke-width:2px
    end

    %% Main Architecture
    A[User] -->|CLI| B[changelog_generator.py]
    style A fill:#bbf,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px

    B --> C[GitRepoManager]
    style C fill:#bfb,stroke:#333,stroke-width:2px
    B --> D[AIProviderManager]
    style D fill:#fbb,stroke:#333,stroke-width:2px
    D --> E[OllamaProvider]
    style E fill:#fbb,stroke:#333,stroke-width:2px
    D --> F[OpenAIProvider]
    style F fill:#fbb,stroke:#333,stroke-width:2px
    D --> G[XAIProvider]
    style G fill:#fbb,stroke:#333,stroke-width:2px
    E --> H[Ollama]
    style H fill:#fbb,stroke:#333,stroke-width:2px
    F --> I[OpenAI API]
    style I fill:#fbb,stroke:#333,stroke-width:2px
    G --> J[XAI API]
    style J fill:#fbb,stroke:#333,stroke-width:2px
    C --> K[Git Repository]
    style K fill:#bfb,stroke:#333,stroke-width:2px
    K --> L[Commit1]
    style L fill:#bfb,stroke:#333,stroke-width:2px
    K --> M[Commit2]
    style M fill:#bfb,stroke:#333,stroke-width:2px
    L --> N[Changes]
    style N fill:#ff9,stroke:#333,stroke-width:2px
    M --> N
    N --> O[Changelog]
    style O fill:#ff9,stroke:#333,stroke-width:2px
    O --> P[Output File]
    style P fill:#ff9,stroke:#333,stroke-width:2px
    B --> Q[Logging]
    style Q fill:#ff9,stroke:#333,stroke-width:2px
    B --> R[Retry Mechanism]
    style R fill:#ff9,stroke:#333,stroke-width:2px
    B --> S[Argument Parsing]
    style S fill:#ff9,stroke:#333,stroke-width:2px

    %% Legend Descriptions
    subgraph LegendDetails [Legend Details]
        direction TB
        L3[Blue: User Interaction] --> L4[How users interact with the system]
        L5[Green: Data Sources] --> L6[Where data is retrieved from]
        L7[Red: AI Providers] --> L8[External AI services used]
        L9[Yellow: Processing] --> L10[Core system transformations]
    end
    
    style L3 fill:#bbf,stroke:#333,stroke-width:2px
    style L4 fill:#bbf,stroke:#333,stroke-width:2px
    style L5 fill:#bfb,stroke:#333,stroke-width:2px
    style L6 fill:#bfb,stroke:#333,stroke-width:2px
    style L7 fill:#fbb,stroke:#333,stroke-width:2px
    style L8 fill:#fbb,stroke:#333,stroke-width:2px
    style L9 fill:#ff9,stroke:#333,stroke-width:2px
    style L10 fill:#ff9,stroke:#333,stroke-width:2px
    
    style LegendDetails fill:#f9f,stroke-dasharray:5
